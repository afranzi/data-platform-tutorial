#!/usr/bin/env bash

## rapidly curl a random tweet (selected from a list of tweets)

read -r -d '' TXT <<- EOM
865662968574468097
865663447559659520
865661331105497092
865664175615299585
865663063520706561
865661452941574145
865663658596208642
865664519552487425
865662818468601857
865662368407101440
865663611263471616
865663170307776514
865662525953540096
865661380292100096
865662901692116992
865663839412436992
865662955437686784
865663208702451713
865662937377021952
865661356258639872
865664298546114560
865661281038028801
865664199560544256
865663370523025408
000000000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
EOM

# convert to array
ARR=($TXT)

RANDOM=$$$(date +%s)

while true
do
    tweet=${ARR[$RANDOM % ${#ARR[@]} ]}
    echo $tweet
    curl -s http://localhost:8080/getTweet?tweetId=${tweet} > /dev/null
    sleep 1
done